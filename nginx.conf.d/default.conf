	proxy_cache_path /var/nginx/cache keys_zone=one:10m
     loader_threshold=300
     loader_files=200 max_size=200m;


server {
	server_name *.*;
	proxy_cache one;
	proxy_cache_valid 200 10m;

    client_max_body_size 2000M;

    set $no_cache 0;
    if ($request_uri ~ ^/$            ) {	  set $no_cache 1;	}
	if ($request_uri ~ ^/ru/preorder  ) {	  set $no_cache 1;	}
	if ($request_uri ~ ^/ru/subscribe ) {	  set $no_cache 1;	}
	if ($request_uri ~ ^/en/preorder  ) {	  set $no_cache 1;	}
	if ($request_uri ~ ^/en/subscribe ) {	  set $no_cache 1;	}
    if ($request_uri ~ ^/ru/admin     ) {	  set $no_cache 1;	}
    if ($request_uri ~ ^/en/admin     ) {	  set $no_cache 1;	}
    if ($request_uri ~ ^/payment      ) {	  set $no_cache 1;	}
    if ($request_uri ~ ^/ru/my        ) {	  set $no_cache 1;	}
    if ($request_uri ~ ^/en/my        ) {	  set $no_cache 1;	}

	location / {
	    proxy_cache_bypass $no_cache;
		proxy_pass http://web:80;
        proxy_set_header Host            $host;
        proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
        proxy_set_header X-Forwarded-Proto $http_x_forwarded_proto;
        proxy_connect_timeout       600;
        proxy_send_timeout          600;
        proxy_read_timeout          600;
        send_timeout                600;
	}
}

